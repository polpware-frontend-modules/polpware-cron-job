!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@polpware/fe-utilities"),require("@polpware/ngx-alert"),require("cron-parser"),require("@angular/common"),require("@40three/ngx-autofocus-directive"),require("ngx-bootstrap/datepicker"),require("ngx-bootstrap/timepicker"),require("ngx-bootstrap/alert"),require("@polpware/ngx-i18n"),require("ngx-bootstrap/accordion"),require("ngx-bootstrap/buttons"),require("ngx-bootstrap/carousel"),require("ngx-bootstrap/collapse"),require("ngx-bootstrap/dropdown"),require("ngx-bootstrap/modal"),require("ngx-bootstrap/pagination"),require("ngx-bootstrap/popover"),require("ngx-bootstrap/progressbar"),require("ngx-bootstrap/tabs"),require("ngx-bootstrap/tooltip")):"function"==typeof define&&define.amd?define("@polpware/cron-job",["exports","@angular/core","@angular/forms","@polpware/fe-utilities","@polpware/ngx-alert","cron-parser","@angular/common","@40three/ngx-autofocus-directive","ngx-bootstrap/datepicker","ngx-bootstrap/timepicker","ngx-bootstrap/alert","@polpware/ngx-i18n","ngx-bootstrap/accordion","ngx-bootstrap/buttons","ngx-bootstrap/carousel","ngx-bootstrap/collapse","ngx-bootstrap/dropdown","ngx-bootstrap/modal","ngx-bootstrap/pagination","ngx-bootstrap/popover","ngx-bootstrap/progressbar","ngx-bootstrap/tabs","ngx-bootstrap/tooltip"],t):t(((e=e||self).polpware=e.polpware||{},e.polpware["cron-job"]={}),e.ng.core,e.ng.forms,e.feUtilities,e.ngxAlert,e.cronParser,e.ng.common,e.ngxAutofocusDirective,e.datepicker,e.timepicker,e.alert,e.ngxI18n,e.accordion,e.buttons,e.carousel,e.collapse,e.dropdown,e.modal,e.pagination,e.popover,e.progressbar,e.tabs,e.tooltip)}(this,(function(e,t,n,r,o,l,a,i,u,s,p,d,c,m,f,y,v,h,x,g,b,C,E){"use strict";var O,S,I,M,k={polpCronJob:{scheduleType:"Schedule Type",recurrence:"Recurrence",customExpr:"Custom CRON expression",startDate:"Start date",monthOfYear:"Month",dayOfMonth:"Day",dayOfWeek:"Day",timezone:"Timezone",time:"Time",excludeHolidays:"Exclude holidays",holidayLabel:"Define the list of holidays",excludeWeekends:"Exclude weekends",excludeOthers:"Other exceptions",otherLabel:"Define the list of exceptions",endDate:"End date",cancelBtn:"Cancel",submitBtn:"Submit",oneTimeSchedule:"One time",recurrentSchedule:"Recurrent",everyDay:"Every day",everyWeek:"Every week",everyMonth:"Every month",everyYear:"Every year",customInterval:"Custom",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",errors:{general:"Some of your inputs are not valid. Please check them!",customExprInvalid:"Invalid CRON expression",timezoneInvalid:"Timezone is not valid. Only a number from -10 to 12 is accepted. ",scheduleTypeRequired:"Please select one schedule type!"}}};function T(){var e=(new Date).getTimezoneOffset();return-Math.floor(e/60)}function D(){var t=[];for(var n in e.MonthEnum){parseInt(n,10)>=0&&t.push({value:n,text:"polpCronJob."+e.MonthEnum[n]})}return t}function J(){var t=[];for(var n in e.DayOfWeekEnum){parseInt(n,10)>=0&&t.push({value:n,text:"polpCronJob."+e.DayOfWeekEnum[n]})}return t}function W(){for(var e=[],t=1;t<32;t++)e.push({value:t,text:t.toString()});return e}function R(){var t=new Date,n=new Date(t);return n.setDate(n.getDate()+1),{isRecurrent:!1,recurrence:0,holidays:"",excludeWeekends:!1,otherDays:"",customExpr:"",timezone:T(),startDate:n,endDate:null,time:t,monthOfYear:e.MonthEnum.January,dayOfMonth:1,dayOfWeek:e.DayOfWeekEnum.Monday}}function w(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9),t.ɵɵelement(1,"input",10),t.ɵɵelementStart(2,"label",11),t.ɵɵtext(3),t.ɵɵpipe(4,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=n.$implicit,o=n.index,l=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("id","schedule-type-opt-"+o),t.ɵɵpropertyInterpolate("value",r.value),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate("for","schedule-type-opt-"+o),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(4,4,r.text,null,null,l.defaultRes)," ")}}function B(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",12),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,1,"polpCronJob.errors.scheduleTypeRequired",null,null,r.defaultRes)," ")}}function F(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",5),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵtemplate(5,w,5,9,"div",7),t.ɵɵtemplate(6,B,3,6,"span",8),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,3,"polpCronJob.scheduleType",null,null,r.defaultRes)," "),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",r.scheduleTypeOptions),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.form.hasError("scheduleType")&&(r.form.get("scheduleType").dirty||r.form.get("scheduleType").touched))}}function N(e,n){if(1&e&&(t.ɵɵelementStart(0,"option",17),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()),2&e){var r=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵpropertyInterpolate("value",r.value),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,2,r.text,null,null,o.defaultRes)," ")}}function P(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",13),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelementStart(5,"select",14),t.ɵɵelementStart(6,"option",15),t.ɵɵtext(7,"..."),t.ɵɵelementEnd(),t.ɵɵtemplate(8,N,3,7,"option",16),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.recurrence",null,null,r.defaultRes)," "),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",r.recurrenceOptions)}}function z(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",12),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,1,"polpCronJob.errors.customExprInvalid",null,null,r.defaultRes)," ")}}function q(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",18),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelement(5,"input",19),t.ɵɵtemplate(6,z,3,6,"span",8),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,3,"polpCronJob.customExpr",null,null,r.defaultRes)," "),t.ɵɵadvance(3),t.ɵɵproperty("autofocus",!0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.form.hasError("customExpr")&&(r.form.get("customExpr").dirty||r.form.get("customExpr").touched))}}(O=e.IntervalEnum||(e.IntervalEnum={}))[O.Day=10]="Day",O[O.Week=50]="Week",O[O.Month=100]="Month",O[O.Year=500]="Year",O[O.Custom=1e4]="Custom",(S=e.ScheduleTypeEnum||(e.ScheduleTypeEnum={}))[S.OneTime=1]="OneTime",S[S.Recurrent=2]="Recurrent",(I=e.MonthEnum||(e.MonthEnum={}))[I.January=1]="January",I[I.February=2]="February",I[I.March=3]="March",I[I.April=4]="April",I[I.May=5]="May",I[I.June=6]="June",I[I.July=7]="July",I[I.August=8]="August",I[I.September=9]="September",I[I.October=10]="October",I[I.November=11]="November",I[I.December=12]="December",(M=e.DayOfWeekEnum||(e.DayOfWeekEnum={}))[M.Sunday=0]="Sunday",M[M.Monday=1]="Monday",M[M.Tuesday=2]="Tuesday",M[M.Wednesday=3]="Wednesday",M[M.Thursday=4]="Thursday",M[M.Friday=5]="Friday",M[M.Saturday=6]="Saturday";var A=function(){return{adaptivePosition:!0}};function Y(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",20),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelement(5,"input",21),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.startDate",null,null,r.defaultRes)," "),t.ɵɵadvance(3),t.ɵɵproperty("bsConfig",t.ɵɵpureFunction0(7,A))}}function V(e,n){if(1&e&&(t.ɵɵelementStart(0,"option",17),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()),2&e){var r=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵpropertyInterpolate("value",r.value),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,2,r.text,null,null,o.defaultRes)," ")}}function H(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",22),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelementStart(5,"select",23),t.ɵɵelementStart(6,"option",15),t.ɵɵtext(7,"..."),t.ɵɵelementEnd(),t.ɵɵtemplate(8,V,3,7,"option",16),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.monthOfYear",null,null,r.defaultRes)," "),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",r.monthsOfYearOptions)}}function j(e,n){if(1&e&&(t.ɵɵelementStart(0,"option",17),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵpropertyInterpolate("value",r.value),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r.text," ")}}function _(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",24),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelementStart(5,"select",25),t.ɵɵelementStart(6,"option",15),t.ɵɵtext(7,"..."),t.ɵɵelementEnd(),t.ɵɵtemplate(8,j,2,2,"option",16),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.dayOfMonth",null,null,r.defaultRes)," "),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",r.daysOfMonthOptions)}}function $(e,n){if(1&e&&(t.ɵɵelementStart(0,"option",17),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()),2&e){var r=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵpropertyInterpolate("value",r.value),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,2,r.text,null,null,o.defaultRes)," ")}}function G(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",26),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelementStart(5,"select",27),t.ɵɵelementStart(6,"option",15),t.ɵɵtext(7,"..."),t.ɵɵelementEnd(),t.ɵɵtemplate(8,$,3,7,"option",16),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.dayOfWeek",null,null,r.defaultRes)," "),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",r.daysOfWeekOptions)}}function L(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",12),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,1,"polpCronJob.errors.timezoneInvalid",null,null,r.defaultRes)," ")}}function U(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",28),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelement(5,"input",29),t.ɵɵtemplate(6,L,3,6,"span",8),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.timezone",null,null,r.defaultRes)," "),t.ɵɵadvance(4),t.ɵɵproperty("ngIf",r.form.hasError("timezone")&&(r.form.get("timezone").dirty||r.form.get("timezone").touched))}}function K(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",30),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelement(5,"timepicker",31),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,1,"polpCronJob.time",null,null,r.defaultRes)," ")}}function Q(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",32),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelementStart(5,"div",33),t.ɵɵelement(6,"input",34),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div"),t.ɵɵtext(8),t.ɵɵpipe(9,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.excludeHolidays",null,null,r.defaultRes)," "),t.ɵɵadvance(6),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(9,7,"polpCronJob.holidayLabel",null,null,r.defaultRes)," ")}}function X(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",35),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelementStart(5,"div",33),t.ɵɵelement(6,"input",36),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,1,"polpCronJob.excludeWeekends",null,null,r.defaultRes)," ")}}function Z(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",37),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelementStart(5,"div",33),t.ɵɵelement(6,"input",38),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div"),t.ɵɵtext(8),t.ɵɵpipe(9,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.excludeOthers",null,null,r.defaultRes)," "),t.ɵɵadvance(6),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(9,7,"polpCronJob.otherLabel",null,null,r.defaultRes)," ")}}function ee(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"label",39),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",6),t.ɵɵelement(5,"input",40),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,2,"polpCronJob.endDate",null,null,r.defaultRes)," "),t.ɵɵadvance(3),t.ɵɵproperty("bsConfig",t.ɵɵpureFunction0(7,A))}}function te(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"alert",41),t.ɵɵtext(2),t.ɵɵpipe(3,"hyperTrans"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var r=n.$implicit,o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("type",r.type)("dismissOnTimeout",r.timeout),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(3,3,r.message,null,null,o.defaultRes)," ")}}function ne(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",45),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).cancel()})),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()}if(2&e){var o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,1,"polpCronJob.cancelBtn",null,null,o.defaultRes)," ")}}function re(e,n){if(1&e&&(t.ɵɵelementStart(0,"button",46),t.ɵɵtext(1),t.ɵɵpipe(2,"hyperTrans"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind4(2,1,"polpCronJob.submitBtn",null,null,r.defaultRes)," ")}}function oe(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",42),t.ɵɵtemplate(1,ne,3,6,"button",43),t.ɵɵtemplate(2,re,3,6,"button",44),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.settings.hideCancel),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.settings.hideConfirm)}}var le={hideConfirm:!1,hideCancel:!0},ae=function(t){var n=r.safeParseInt(t.get("scheduleType").value);if(0==n)return{scheduleType:!0};var o=r.safeParseInt(t.get("timezone").value);if(o>13||o<-11)return{timezone:!0};if(2==n){var a=r.safeParseInt(t.get("recurrence").value);if(0==a)return{recurrence:!0};if(a==e.IntervalEnum.Custom){var i=t.get("customExpr").value;if(!i)return{customExpr:!0};var u=l.parseString(i);if(u.errors&&Object.keys(u.errors).length)return{customExpr:!0}}}};function ie(t){var n=R();return{scheduleType:((t=Object.assign({},n,t||{})).isRecurrent?e.ScheduleTypeEnum.Recurrent:e.ScheduleTypeEnum.OneTime).toString(),recurrence:t.recurrence,excludeHolidays:!!t.holidays,holidays:t.holidays,excludeWeekends:t.excludeWeekends,excludeOthers:!!t.otherDays,otherDays:t.otherDays,customExpr:t.customExpr,timezone:t.timezone,startDate:t.startDate,endDate:t.endDate,time:t.time,monthOfYear:t.monthOfYear,dayOfWeek:t.dayOfWeek,dayOfMonth:t.dayOfMonth}}var ue=function(){function l(n){this._builder=n,this.initSettings={},this.initValue=null,this.onConfirm=new t.EventEmitter,this.onCancel=new t.EventEmitter,this.settings={},this.defaultRes=k,this.scheduleTypeOptions=[{value:e.ScheduleTypeEnum.OneTime,text:"polpCronJob.oneTimeSchedule"},{value:e.ScheduleTypeEnum.Recurrent,text:"polpCronJob.recurrentSchedule"}],this.recurrenceOptions=[{value:e.IntervalEnum.Day,text:"polpCronJob.everyDay"},{value:e.IntervalEnum.Week,text:"polpCronJob.everyWeek"},{value:e.IntervalEnum.Month,text:"polpCronJob.everyMonth"},{value:e.IntervalEnum.Year,text:"polpCronJob.everyYear"},{value:e.IntervalEnum.Custom,text:"polpCronJob.customInterval"}],this.daysOfWeekOptions=J(),this.monthsOfYearOptions=D(),this.daysOfMonthOptions=W(),this.visibiltyCfg={scheduleType:!0,recurrence:!1,customExpr:!1,excludeHolidays:!1,excludeWeekends:!1,excludeOthers:!1,timezone:!1,startDate:!1,endDate:!1,time:!1,monthOfYear:!1,dayOfMonth:!1,dayOfWeek:!1},this.alertProvider=new o.AlertDefaultImpl}return Object.defineProperty(l.prototype,"oneTimeValue",{get:function(){var e=this.form.value;return{isRecurrent:!1,timezone:r.safeParseInt(e.timezone),startDate:e.startDate,time:e.time}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"recurrentValue",{get:function(){var e=this.form.value,t=r.safeParseInt(e.recurrence),n=r.safeParseInt(e.timezone);return{isRecurrent:!0,recurrence:t,holidays:e.excludeHolidays?e.holidays:"",excludeWeekends:e.excludeWeekends,otherDays:e.excludeOthers?e.otherDays:"",timezone:n,startDate:e.startDate,endDate:e.endDate,time:e.time,monthOfYear:e.monthOfYear,dayOfMonth:e.dayOfMonth,dayOfWeek:e.dayOfWeek}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"alerts",{get:function(){return this.alertProvider.data},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var e=this;this.settings=Object.assign({},le,this.initSettings);var t=ie(this.initValue);this.form=this._builder.group(t,{validators:[ae]}),this.updateFieldVisibility(this.form.value),this._subr=this.form.valueChanges.subscribe((function(t){console.log(t),e.updateFieldVisibility(t)}))},l.prototype.ngOnDestroy=function(){this._subr.unsubscribe()},l.prototype.ngOnChanges=function(e){e.initValue.firstChange||this.updateFormData(e.initValue.currentValue)},l.prototype.updateFormData=function(e){var t=ie(e);this.form.setValue(t,{emitEvent:!0})},l.prototype.updateFieldVisibility=function(t){for(var n in this.visibiltyCfg)this.visibiltyCfg.hasOwnProperty(n)&&(this.visibiltyCfg[n]=!1);if(this.visibiltyCfg.scheduleType=!0,1==r.safeParseInt(t.scheduleType))this.visibiltyCfg.startDate=!0,this.visibiltyCfg.time=!0,this.visibiltyCfg.timezone=!0;else{this.visibiltyCfg.recurrence=!0,this.visibiltyCfg.excludeHolidays=!0,this.visibiltyCfg.excludeWeekends=!0,this.visibiltyCfg.excludeOthers=!0,this.visibiltyCfg.endDate=!0,this.visibiltyCfg.time=!0,this.visibiltyCfg.timezone=!0;var o=r.safeParseInt(t.recurrence);o==e.IntervalEnum.Year?(this.visibiltyCfg.monthOfYear=!0,this.visibiltyCfg.dayOfMonth=!0):o==e.IntervalEnum.Month?this.visibiltyCfg.dayOfMonth=!0:o==e.IntervalEnum.Week?this.visibiltyCfg.dayOfWeek=!0:o==e.IntervalEnum.Custom&&(this.visibiltyCfg.time=!1,this.visibiltyCfg.customExpr=!0)}},l.prototype.confirm=function(){if(this.form.valid){var t=this.form.value,n=r.safeParseInt(t.scheduleType)==e.ScheduleTypeEnum.OneTime?this.oneTimeValue:this.recurrentValue;this.onConfirm.emit(n)}else this.alertProvider.warning("polpCronJob.errors.general",5e3)},l.prototype.cancel=function(){this.onCancel.emit()},l.ɵfac=function(e){return new(e||l)(t.ɵɵdirectiveInject(n.FormBuilder))},l.ɵcmp=t.ɵɵdefineComponent({type:l,selectors:[["polp-bs-schedule-time-picker"]],inputs:{initSettings:"initSettings",initValue:"initValue"},outputs:{onConfirm:"onConfirm",onCancel:"onCancel"},features:[t.ɵɵNgOnChangesFeature],decls:16,vars:16,consts:[[3,"formGroup","ngSubmit"],["class","form-group row",4,"ngIf"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-end mb-4",4,"ngIf"],[1,"form-group","row"],[1,"col-12","col-md-4","col-form-label"],[1,"col-12","col-md-8"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],["class","text-warning d-block my-1 small",4,"ngIf"],[1,"form-check","form-check-inline"],["formControlName","scheduleType","type","radio",1,"form-check-input",3,"id","value"],[1,"form-check-label",3,"for"],[1,"text-warning","d-block","my-1","small"],["for","schedule-recurrence",1,"col-12","col-md-4","col-form-label"],["id","schedule-recurrence","formControlName","recurrence",1,"form-control"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","schedule-custom-expr",1,"col-12","col-md-4","col-form-label"],["type","text","id","schedule-custom-expr","formControlName","customExpr",1,"form-control",3,"autofocus"],["for","schedule-start-date",1,"col-12","col-md-4","col-form-label"],["type","text","id","schedule-start-date","bsDatepicker","","formControlName","startDate",1,"form-control",3,"bsConfig"],["for","schedule-month-of-year",1,"col-12","col-md-4","col-form-label"],["id","schedule-month-of-year","formControlName","monthOfYear",1,"form-control"],["for","schedule-day-of-month",1,"col-12","col-md-4","col-form-label"],["id","schedule-day-of-month","formControlName","dayOfMonth",1,"form-control"],["for","schedule-day-of-week",1,"col-12","col-md-4","col-form-label"],["id","schedule-day-of-week","formControlName","dayOfWeek",1,"form-control"],["for","schedule-timezone",1,"col-12","col-md-4","col-form-label"],["type","number","id","schedule-timezone","formControlName","timezone",1,"form-control"],["for","schedule-time",1,"col-12","col-md-4","col-form-label"],["id","schedule-time","formControlName","time"],["for","schedule-exclude-holidays",1,"col-12","col-md-4","col-form-label"],[1,"form-check"],["type","checkbox","id","schedule-exclude-holidays","formControlName","excludeHolidays",1,"form-check-input","position-static"],["for","schedule-exclude-weekends",1,"col-12","col-md-4","col-form-label"],["type","checkbox","id","schedule-exclude-weekends","formControlName","excludeWeekends",1,"form-check-input","position-static"],["for","schedule-exclude-others",1,"col-12","col-md-4","col-form-label"],["id","schedule-exclude-others","type","checkbox","formControlName","excludeOthers",1,"form-check-input","position-static"],["for","schedule-end-date",1,"col-12","col-md-4","col-form-label"],["type","text","id","schedule-end-date","bsDatepicker","","formControlName","endDate",1,"form-control",3,"bsConfig"],[3,"type","dismissOnTimeout"],[1,"d-flex","justify-content-end","mb-4"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],["type","submit","class","btn btn-success",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],["type","submit",1,"btn","btn-success"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"form",0),t.ɵɵlistener("ngSubmit",(function(){return n.confirm()})),t.ɵɵtemplate(1,F,7,8,"div",1),t.ɵɵtemplate(2,P,9,7,"div",1),t.ɵɵtemplate(3,q,7,8,"div",1),t.ɵɵtemplate(4,Y,6,8,"div",1),t.ɵɵtemplate(5,H,9,7,"div",1),t.ɵɵtemplate(6,_,9,7,"div",1),t.ɵɵtemplate(7,G,9,7,"div",1),t.ɵɵtemplate(8,U,7,7,"div",1),t.ɵɵtemplate(9,K,6,6,"div",1),t.ɵɵtemplate(10,Q,10,12,"div",1),t.ɵɵtemplate(11,X,7,6,"div",1),t.ɵɵtemplate(12,Z,10,12,"div",1),t.ɵɵtemplate(13,ee,6,8,"div",1),t.ɵɵtemplate(14,te,4,8,"ng-container",2),t.ɵɵtemplate(15,oe,3,2,"div",3),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.form),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.scheduleType),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.recurrence),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.recurrence&&n.visibiltyCfg.customExpr),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.startDate),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.monthOfYear),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.dayOfMonth),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.dayOfWeek),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.timezone),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.time),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.excludeHolidays),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.excludeWeekends),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.excludeOthers),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.visibiltyCfg.endDate),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.alerts),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.settings.hideConfirm||!n.settings.hideCancel))},directives:[n.ɵangular_packages_forms_forms_y,n.NgControlStatusGroup,n.FormGroupDirective,a.NgIf,a.NgForOf,n.DefaultValueAccessor,n.RadioControlValueAccessor,n.NgControlStatus,n.FormControlName,n.SelectControlValueAccessor,n.NgSelectOption,n.ɵangular_packages_forms_forms_x,i.AutofocusDirective,u.BsDatepickerInputDirective,u.BsDatepickerDirective,n.NumberValueAccessor,s.TimepickerComponent,n.CheckboxControlValueAccessor,p.AlertComponent],pipes:[d.HyperTranslatePipe],styles:[""]}),l}(),se=function(){function n(){}return n.prototype.parseCronExpr=function(t,n){var r=l.parseExpression(t);1==r.fields.month.length&&1==r.fields.dayOfMonth.length?n.recurrence=e.IntervalEnum.Year:12==r.fields.month.length&&1==r.fields.dayOfMonth.length&&8==r.fields.dayOfWeek.length?n.recurrence=e.IntervalEnum.Month:12==r.fields.month.length&&31==r.fields.dayOfMonth.length&&1==r.fields.dayOfWeek.length?n.recurrence=e.IntervalEnum.Week:12==r.fields.month.length&&31==r.fields.dayOfMonth.length&&8==r.fields.dayOfWeek.length?(n.recurrence,e.IntervalEnum.Day):n.recurrence=e.IntervalEnum.Custom;var o=new Date;o.setHours(r.fields.hour[0]||0),o.setMinutes(r.fields.minute[0]||0),o.setHours((o.getHours()+n.timezone+24)%24),n.time=o},n.prototype.composeCronExpr=function(t){var n=new Date(t.time);return n.setHours((n.getHours()-t.timezone+24)%24),t.recurrence==e.IntervalEnum.Year?n.getMinutes()+" "+n.getHours()+" "+t.dayOfMonth+" "+t.monthOfYear+" *":t.recurrence==e.IntervalEnum.Month?n.getMinutes()+" "+n.getHours()+" "+t.dayOfMonth+" * *":t.recurrence==e.IntervalEnum.Week?n.getMinutes()+" "+n.getHours()+" * * "+t.dayOfWeek:t.recurrence==e.IntervalEnum.Day?n.getMinutes()+" "+n.getHours()+" * * *":t.recurrence==e.IntervalEnum.Custom?t.customExpr:""},n.ɵfac=function(e){return new(e||n)},n.ɵprov=t.ɵɵdefineInjectable({token:n,factory:n.ɵfac,providedIn:"root"}),n}(),pe=function(){function e(){}return e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[a.CommonModule,n.FormsModule,n.ReactiveFormsModule,v.BsDropdownModule,C.TabsModule,x.PaginationModule,h.ModalModule,c.AccordionModule,g.PopoverModule,E.TooltipModule,f.CarouselModule,p.AlertModule,u.BsDatepickerModule,m.ButtonsModule,y.CollapseModule,b.ProgressbarModule,s.TimepickerModule,i.FtAutofocusModule,d.NgxI18nModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(pe,{declarations:[ue],imports:[a.CommonModule,n.FormsModule,n.ReactiveFormsModule,v.BsDropdownModule,C.TabsModule,x.PaginationModule,h.ModalModule,c.AccordionModule,g.PopoverModule,E.TooltipModule,f.CarouselModule,p.AlertModule,u.BsDatepickerModule,m.ButtonsModule,y.CollapseModule,b.ProgressbarModule,s.TimepickerModule,i.FtAutofocusModule,d.NgxI18nModule],exports:[ue]}),e.CronJobService=se,e.PolpBsCronJobModule=pe,e.ScheduleTimePickerComponent=ue,e.defaultDict=k,e.getDaysOfMonth=W,e.getDaysOfWeek=J,e.getDefaultScheduleTime=R,e.getMonthsOfYear=D,e.getTimezoneOffset=T,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polpware-cron-job.umd.min.js.map