!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polpware/fe-utilities"),require("@angular/core"),require("@angular/forms"),require("@polpware/ngx-alert"),require("@polpware/ngx-form-common"),require("cron-parser"),require("@angular/common"),require("@40three/ngx-autofocus-directive"),require("ngx-bootstrap/datepicker"),require("ngx-bootstrap/timepicker"),require("ngx-bootstrap/alert"),require("@polpware/ngx-i18n"),require("moment"),require("ngx-bootstrap/accordion"),require("ngx-bootstrap/buttons"),require("ngx-bootstrap/carousel"),require("ngx-bootstrap/collapse"),require("ngx-bootstrap/dropdown"),require("ngx-bootstrap/modal"),require("ngx-bootstrap/pagination"),require("ngx-bootstrap/popover"),require("ngx-bootstrap/progressbar"),require("ngx-bootstrap/tabs"),require("ngx-bootstrap/tooltip")):"function"==typeof define&&define.amd?define("@polpware/cron-job",["exports","@polpware/fe-utilities","@angular/core","@angular/forms","@polpware/ngx-alert","@polpware/ngx-form-common","cron-parser","@angular/common","@40three/ngx-autofocus-directive","ngx-bootstrap/datepicker","ngx-bootstrap/timepicker","ngx-bootstrap/alert","@polpware/ngx-i18n","moment","ngx-bootstrap/accordion","ngx-bootstrap/buttons","ngx-bootstrap/carousel","ngx-bootstrap/collapse","ngx-bootstrap/dropdown","ngx-bootstrap/modal","ngx-bootstrap/pagination","ngx-bootstrap/popover","ngx-bootstrap/progressbar","ngx-bootstrap/tabs","ngx-bootstrap/tooltip"],t):t(((e=e||self).polpware=e.polpware||{},e.polpware["cron-job"]={}),e.feUtilities,e.ng.core,e.ng.forms,e.ngxAlert,e.ngxFormCommon,e.cronParser,e.ng.common,e.ngxAutofocusDirective,e.datepicker,e.timepicker,e.alert,e.ngxI18n,e.moment,e.accordion,e.buttons,e.carousel,e.collapse,e.dropdown,e.modal,e.pagination,e.popover,e.progressbar,e.tabs,e.tooltip)}(this,(function(e,t,n,r,o,l,a,i,u,p,d,s,c,m,f,y,h,v,x,g,b,C,E,O,S){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var M,k={polpCronJob:{scheduleType:"Schedule Type",recurrence:"Recurrence",customExpr:"Custom CRON expression",startDate:"Start date",monthOfYear:"Month",dayOfMonth:"Day",dayOfWeek:"Day",time:"Time",excludeHolidays:"Exclude holidays",holidayLabel:"Define the list of holidays",excludeWeekends:"Exclude weekends",excludeOthers:"Other exceptions",otherLabel:"Define the list of exceptions",endDate:"End date",cancelBtn:"Cancel",submitBtn:"Submit",oneTimeSchedule:"One time",recurrentSchedule:"Recurrent",everyDay:"Every day",everyWeek:"Every week",everyMonth:"Every month",everyYear:"Every year",customInterval:"Custom",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",errors:{general:"Some of your inputs are not valid. Please check them!",customExprInvalid:"Invalid CRON expression",scheduleTypeRequired:"Please select one schedule type!"}}};function T(){var e=new Date,n=new Date(e);return n.setDate(n.getDate()+1),{isRecurrent:!1,recurrence:0,holidays:"",excludeWeekends:!1,otherDays:"",customExpr:"",startDate:n,endDate:null,time:e,monthOfYear:t.MonthEnum.January,dayOfMonth:1,dayOfWeek:t.DayOfWeekEnum.Monday}}function D(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",9),n.ɵɵelement(1,"input",10),n.ɵɵelementStart(2,"label",11),n.ɵɵtext(3),n.ɵɵpipe(4,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=t.$implicit,o=t.index,l=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("id","schedule-type-opt-"+o),n.ɵɵpropertyInterpolate("value",r.value),n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("for","schedule-type-opt-"+o),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(4,4,r.text,null,null,l.defaultRes)," ")}}function B(e,t){if(1&e&&(n.ɵɵelementStart(0,"span",12),n.ɵɵtext(1),n.ɵɵpipe(2,"hyperTrans"),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(2,1,"polpCronJob.errors.scheduleTypeRequired",null,null,r.defaultRes)," ")}}function w(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",5),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵtemplate(5,D,5,9,"div",7),n.ɵɵtemplate(6,B,3,6,"span",8),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,3,"polpCronJob.scheduleType",null,null,r.defaultRes)," "),n.ɵɵadvance(3),n.ɵɵproperty("ngForOf",r.scheduleTypeOptions),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.form.hasError("scheduleType")&&(r.form.get("scheduleType").dirty||r.form.get("scheduleType").touched))}}function R(e,t){if(1&e&&(n.ɵɵelementStart(0,"option",17),n.ɵɵtext(1),n.ɵɵpipe(2,"hyperTrans"),n.ɵɵelementEnd()),2&e){var r=t.$implicit,o=n.ɵɵnextContext(2);n.ɵɵpropertyInterpolate("value",r.value),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(2,2,r.text,null,null,o.defaultRes)," ")}}function F(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",13),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"select",14),n.ɵɵelementStart(6,"option",15),n.ɵɵtext(7,"..."),n.ɵɵelementEnd(),n.ɵɵtemplate(8,R,3,7,"option",16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.recurrence",null,null,r.defaultRes)," "),n.ɵɵadvance(6),n.ɵɵproperty("ngForOf",r.recurrenceOptions)}}function J(e,t){if(1&e&&(n.ɵɵelementStart(0,"span",12),n.ɵɵtext(1),n.ɵɵpipe(2,"hyperTrans"),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(2,1,"polpCronJob.errors.customExprInvalid",null,null,r.defaultRes)," ")}}function W(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",18),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelement(5,"input",19),n.ɵɵtemplate(6,J,3,6,"span",8),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,3,"polpCronJob.customExpr",null,null,r.defaultRes)," "),n.ɵɵadvance(3),n.ɵɵproperty("autofocus",!0),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.form.hasError("customExpr")&&(r.form.get("customExpr").dirty||r.form.get("customExpr").touched))}}(M=e.ScheduleTypeEnum||(e.ScheduleTypeEnum={}))[M.OneTime=1]="OneTime",M[M.Recurrent=2]="Recurrent";var N=function(){return{adaptivePosition:!0}};function P(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",20),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelement(5,"input",21),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.startDate",null,null,r.defaultRes)," "),n.ɵɵadvance(3),n.ɵɵproperty("bsConfig",n.ɵɵpureFunction0(7,N))}}function V(e,t){if(1&e&&(n.ɵɵelementStart(0,"option",17),n.ɵɵtext(1),n.ɵɵpipe(2,"hyperTrans"),n.ɵɵelementEnd()),2&e){var r=t.$implicit,o=n.ɵɵnextContext(2);n.ɵɵpropertyInterpolate("value",r.value),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(2,2,r.text,null,null,o.defaultRes)," ")}}function q(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",22),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"select",23),n.ɵɵelementStart(6,"option",15),n.ɵɵtext(7,"..."),n.ɵɵelementEnd(),n.ɵɵtemplate(8,V,3,7,"option",16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.monthOfYear",null,null,r.defaultRes)," "),n.ɵɵadvance(6),n.ɵɵproperty("ngForOf",r.monthsOfYearOptions)}}function Y(e,t){if(1&e&&(n.ɵɵelementStart(0,"option",17),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵpropertyInterpolate("value",r.value),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",r.text," ")}}function _(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",24),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"select",25),n.ɵɵelementStart(6,"option",15),n.ɵɵtext(7,"..."),n.ɵɵelementEnd(),n.ɵɵtemplate(8,Y,2,2,"option",16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.dayOfMonth",null,null,r.defaultRes)," "),n.ɵɵadvance(6),n.ɵɵproperty("ngForOf",r.daysOfMonthOptions)}}function A(e,t){if(1&e&&(n.ɵɵelementStart(0,"option",17),n.ɵɵtext(1),n.ɵɵpipe(2,"hyperTrans"),n.ɵɵelementEnd()),2&e){var r=t.$implicit,o=n.ɵɵnextContext(2);n.ɵɵpropertyInterpolate("value",r.value),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(2,2,r.text,null,null,o.defaultRes)," ")}}function j(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",26),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"select",27),n.ɵɵelementStart(6,"option",15),n.ɵɵtext(7,"..."),n.ɵɵelementEnd(),n.ɵɵtemplate(8,A,3,7,"option",16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.dayOfWeek",null,null,r.defaultRes)," "),n.ɵɵadvance(6),n.ɵɵproperty("ngForOf",r.daysOfWeekOptions)}}function H(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",28),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelement(5,"timepicker",29),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,1,"polpCronJob.time",null,null,r.defaultRes)," ")}}function $(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",30),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"div",31),n.ɵɵelement(6,"input",32),n.ɵɵelementEnd(),n.ɵɵelementStart(7,"div"),n.ɵɵtext(8),n.ɵɵpipe(9,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.excludeHolidays",null,null,r.defaultRes)," "),n.ɵɵadvance(6),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(9,7,"polpCronJob.holidayLabel",null,null,r.defaultRes)," ")}}function G(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",33),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"div",31),n.ɵɵelement(6,"input",34),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,1,"polpCronJob.excludeWeekends",null,null,r.defaultRes)," ")}}function L(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",35),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"div",31),n.ɵɵelement(6,"input",36),n.ɵɵelementEnd(),n.ɵɵelementStart(7,"div"),n.ɵɵtext(8),n.ɵɵpipe(9,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.excludeOthers",null,null,r.defaultRes)," "),n.ɵɵadvance(6),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(9,7,"polpCronJob.otherLabel",null,null,r.defaultRes)," ")}}function U(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"label",37),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",6),n.ɵɵelement(5,"input",38),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,2,"polpCronJob.endDate",null,null,r.defaultRes)," "),n.ɵɵadvance(3),n.ɵɵproperty("bsConfig",n.ɵɵpureFunction0(7,N))}}function z(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"alert",39),n.ɵɵtext(2),n.ɵɵpipe(3,"hyperTrans"),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()),2&e){var r=t.$implicit,o=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("type",r.type)("dismissOnTimeout",r.timeout),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(3,3,r.message,null,null,o.defaultRes)," ")}}function K(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"button",43),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext(2).cancel()})),n.ɵɵtext(1),n.ɵɵpipe(2,"hyperTrans"),n.ɵɵelementEnd()}if(2&e){var o=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(2,1,"polpCronJob.cancelBtn",null,null,o.defaultRes)," ")}}function Q(e,t){if(1&e&&(n.ɵɵelementStart(0,"button",44),n.ɵɵtext(1),n.ɵɵpipe(2,"hyperTrans"),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind4(2,1,"polpCronJob.submitBtn",null,null,r.defaultRes)," ")}}function X(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",40),n.ɵɵtemplate(1,K,3,6,"button",41),n.ɵɵtemplate(2,Q,3,6,"button",42),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!r.hideCancelBtn),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!r.hideSubmitBtn)}}var Z={hideSubmitBtn:!1,hideCancelBtn:!0},ee=function(e){var n=t.safeParseInt(e.get("scheduleType").value);if(0==n)return{scheduleType:!0};if(2==n){var r=t.safeParseInt(e.get("recurrence").value);if(0==r)return{recurrence:!0};if(r==t.IntervalEnum.Custom){var o=e.get("customExpr").value;if(!o)return{customExpr:!0};var l=a.parseString(o);if(l.errors&&Object.keys(l.errors).length)return{customExpr:!0}}}};function te(t){var n=T();return{scheduleType:((t=Object.assign({},n,t||{})).isRecurrent?e.ScheduleTypeEnum.Recurrent:e.ScheduleTypeEnum.OneTime).toString(),recurrence:t.recurrence,excludeHolidays:!!t.holidays,holidays:t.holidays,excludeWeekends:t.excludeWeekends,excludeOthers:!!t.otherDays,otherDays:t.otherDays,customExpr:t.customExpr,startDate:t.startDate,endDate:t.endDate,time:t.time,monthOfYear:t.monthOfYear,dayOfWeek:t.dayOfWeek,dayOfMonth:t.dayOfMonth}}var ne=function(l){function a(n){var r=l.call(this)||this;return r._builder=n,r.initSettings={},r.initValue=null,r.settings={},r.defaultRes=k,r.scheduleTypeOptions=[{value:e.ScheduleTypeEnum.OneTime,text:"polpCronJob.oneTimeSchedule"},{value:e.ScheduleTypeEnum.Recurrent,text:"polpCronJob.recurrentSchedule"}],r.recurrenceOptions=[{value:t.IntervalEnum.Day,text:"polpCronJob.everyDay"},{value:t.IntervalEnum.Week,text:"polpCronJob.everyWeek"},{value:t.IntervalEnum.Month,text:"polpCronJob.everyMonth"},{value:t.IntervalEnum.Year,text:"polpCronJob.everyYear"},{value:t.IntervalEnum.Custom,text:"polpCronJob.customInterval"}],r.daysOfWeekOptions=t.getDaysOfWeek(),r.monthsOfYearOptions=t.getMonthsOfYear(),r.daysOfMonthOptions=t.getDaysOfMonth(),r.visibiltyCfg={scheduleType:!0,recurrence:!1,customExpr:!1,excludeHolidays:!1,excludeWeekends:!1,excludeOthers:!1,startDate:!1,endDate:!1,time:!1,monthOfYear:!1,dayOfMonth:!1,dayOfWeek:!1},r.alertProvider=new o.AlertDefaultImpl,r}return function(e,t){function n(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(a,l),Object.defineProperty(a.prototype,"alerts",{get:function(){return this.alertProvider.data},enumerable:!0,configurable:!0}),a.prototype.ngOnInit=function(){var e=this;this.settings=Object.assign({},Z,this.initSettings),this.hideCancelBtn=this.settings.hideCancelBtn,this.hideSubmitBtn=this.settings.hideSubmitBtn;var t=te(this.initValue);this.form=this._builder.group(t,{validators:[ee]}),this.updateFieldVisibility(this.form.value),this._subr=this.form.valueChanges.subscribe((function(t){e.updateFieldVisibility(t),e.notifyValidation(),e.notifyValueChanges(e.computeOutValue(t))}))},a.prototype.ngOnDestroy=function(){this._subr.unsubscribe()},a.prototype.ngOnChanges=function(e){e&&e.initValue&&!e.initValue.firstChange&&this.updateFormData(e.initValue.currentValue)},a.prototype.updateFormData=function(e){var t=te(e);this.form.setValue(t,{emitEvent:!0})},a.prototype.updateFieldVisibility=function(e){for(var n in this.visibiltyCfg)this.visibiltyCfg.hasOwnProperty(n)&&(this.visibiltyCfg[n]=!1);if(this.visibiltyCfg.scheduleType=!0,1==t.safeParseInt(e.scheduleType))this.visibiltyCfg.startDate=!0,this.visibiltyCfg.time=!0;else{this.visibiltyCfg.recurrence=!0,this.visibiltyCfg.excludeHolidays=!0,this.visibiltyCfg.excludeWeekends=!0,this.visibiltyCfg.excludeOthers=!0,this.visibiltyCfg.endDate=!0,this.visibiltyCfg.time=!0;var r=t.safeParseInt(e.recurrence);r==t.IntervalEnum.Year?(this.visibiltyCfg.monthOfYear=!0,this.visibiltyCfg.dayOfMonth=!0):r==t.IntervalEnum.Month?this.visibiltyCfg.dayOfMonth=!0:r==t.IntervalEnum.Week?this.visibiltyCfg.dayOfWeek=!0:r==t.IntervalEnum.Custom&&(this.visibiltyCfg.time=!1,this.visibiltyCfg.customExpr=!0)}},a.prototype.computeOutValue=function(n){return t.safeParseInt(n.scheduleType)==e.ScheduleTypeEnum.OneTime?this.getOneTimeValue(n):this.getRecurrentValue(n)},a.prototype.getOneTimeValue=function(e){return{isRecurrent:!1,startDate:e.startDate,time:e.time}},a.prototype.getRecurrentValue=function(e){return{isRecurrent:!0,recurrence:t.safeParseInt(e.recurrence),holidays:e.excludeHolidays?e.holidays:"",excludeWeekends:e.excludeWeekends,otherDays:e.excludeOthers?e.otherDays:"",startDate:e.startDate,endDate:e.endDate,time:e.time,monthOfYear:e.monthOfYear,dayOfMonth:e.dayOfMonth,dayOfWeek:e.dayOfWeek}},a.prototype.confirm=function(){if(this.form.valid){var e=this.computeOutValue(this.form.value);this.onSave.emit(e)}else this.alertProvider.warning("polpCronJob.errors.general",5e3)},a.prototype.cancel=function(){this.onCancel.emit()},a.ɵfac=function(e){return new(e||a)(n.ɵɵdirectiveInject(r.FormBuilder))},a.ɵcmp=n.ɵɵdefineComponent({type:a,selectors:[["polp-bs-schedule-time-picker"]],inputs:{initSettings:"initSettings",initValue:"initValue"},features:[n.ɵɵInheritDefinitionFeature,n.ɵɵNgOnChangesFeature],decls:15,vars:15,consts:[[3,"formGroup","ngSubmit"],["class","form-group row",4,"ngIf"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-end mb-4",4,"ngIf"],[1,"form-group","row"],[1,"col-12","col-md-4","col-form-label"],[1,"col-12","col-md-8"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],["class","text-warning d-block my-1 small",4,"ngIf"],[1,"form-check","form-check-inline"],["formControlName","scheduleType","type","radio",1,"form-check-input",3,"id","value"],[1,"form-check-label",3,"for"],[1,"text-warning","d-block","my-1","small"],["for","schedule-recurrence",1,"col-12","col-md-4","col-form-label"],["id","schedule-recurrence","formControlName","recurrence",1,"form-control"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","schedule-custom-expr",1,"col-12","col-md-4","col-form-label"],["type","text","id","schedule-custom-expr","formControlName","customExpr",1,"form-control",3,"autofocus"],["for","schedule-start-date",1,"col-12","col-md-4","col-form-label"],["type","text","id","schedule-start-date","bsDatepicker","","formControlName","startDate",1,"form-control",3,"bsConfig"],["for","schedule-month-of-year",1,"col-12","col-md-4","col-form-label"],["id","schedule-month-of-year","formControlName","monthOfYear",1,"form-control"],["for","schedule-day-of-month",1,"col-12","col-md-4","col-form-label"],["id","schedule-day-of-month","formControlName","dayOfMonth",1,"form-control"],["for","schedule-day-of-week",1,"col-12","col-md-4","col-form-label"],["id","schedule-day-of-week","formControlName","dayOfWeek",1,"form-control"],["for","schedule-time",1,"col-12","col-md-4","col-form-label"],["id","schedule-time","formControlName","time"],["for","schedule-exclude-holidays",1,"col-12","col-md-4","col-form-label"],[1,"form-check"],["type","checkbox","id","schedule-exclude-holidays","formControlName","excludeHolidays",1,"form-check-input","position-static"],["for","schedule-exclude-weekends",1,"col-12","col-md-4","col-form-label"],["type","checkbox","id","schedule-exclude-weekends","formControlName","excludeWeekends",1,"form-check-input","position-static"],["for","schedule-exclude-others",1,"col-12","col-md-4","col-form-label"],["id","schedule-exclude-others","type","checkbox","formControlName","excludeOthers",1,"form-check-input","position-static"],["for","schedule-end-date",1,"col-12","col-md-4","col-form-label"],["type","text","id","schedule-end-date","bsDatepicker","","formControlName","endDate",1,"form-control",3,"bsConfig"],[3,"type","dismissOnTimeout"],[1,"d-flex","justify-content-end","mb-4"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],["type","submit","class","btn btn-success",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],["type","submit",1,"btn","btn-success"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"form",0),n.ɵɵlistener("ngSubmit",(function(){return t.confirm()})),n.ɵɵtemplate(1,w,7,8,"div",1),n.ɵɵtemplate(2,F,9,7,"div",1),n.ɵɵtemplate(3,W,7,8,"div",1),n.ɵɵtemplate(4,P,6,8,"div",1),n.ɵɵtemplate(5,q,9,7,"div",1),n.ɵɵtemplate(6,_,9,7,"div",1),n.ɵɵtemplate(7,j,9,7,"div",1),n.ɵɵtemplate(8,H,6,6,"div",1),n.ɵɵtemplate(9,$,10,12,"div",1),n.ɵɵtemplate(10,G,7,6,"div",1),n.ɵɵtemplate(11,L,10,12,"div",1),n.ɵɵtemplate(12,U,6,8,"div",1),n.ɵɵtemplate(13,z,4,8,"ng-container",2),n.ɵɵtemplate(14,X,3,2,"div",3),n.ɵɵelementEnd()),2&e&&(n.ɵɵproperty("formGroup",t.form),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.scheduleType),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.recurrence),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.recurrence&&t.visibiltyCfg.customExpr),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.startDate),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.monthOfYear),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.dayOfMonth),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.dayOfWeek),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.time),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.excludeHolidays),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.excludeWeekends),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.excludeOthers),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.visibiltyCfg.endDate),n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",t.alerts),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!t.hideSubmitBtn||!t.hideCancelBtn))},directives:[r.ɵangular_packages_forms_forms_y,r.NgControlStatusGroup,r.FormGroupDirective,i.NgIf,i.NgForOf,r.DefaultValueAccessor,r.RadioControlValueAccessor,r.NgControlStatus,r.FormControlName,r.SelectControlValueAccessor,r.NgSelectOption,r.ɵangular_packages_forms_forms_x,u.AutofocusDirective,p.BsDatepickerInputDirective,p.BsDatepickerDirective,d.TimepickerComponent,r.CheckboxControlValueAccessor,s.AlertComponent],pipes:[c.HyperTranslatePipe],styles:[""]}),a}(l.DefaultFormBaseComponent),re=function(){function e(){}return e.prototype.parseCronExpr=function(e,n){var r=a.parseExpression(e);1==r.fields.month.length&&1==r.fields.dayOfMonth.length?n.recurrence=t.IntervalEnum.Year:12==r.fields.month.length&&1==r.fields.dayOfMonth.length&&8==r.fields.dayOfWeek.length?n.recurrence=t.IntervalEnum.Month:12==r.fields.month.length&&31==r.fields.dayOfMonth.length&&1==r.fields.dayOfWeek.length?n.recurrence=t.IntervalEnum.Week:12==r.fields.month.length&&31==r.fields.dayOfMonth.length&&8==r.fields.dayOfWeek.length?(n.recurrence,t.IntervalEnum.Day):n.recurrence=t.IntervalEnum.Custom;var o=new Date,l=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),r.fields.hour[0]||0,r.fields.minute[0]||0));n.time=l},e.prototype.composeCronExpr=function(e){var n=new Date(e.time),r=m(n).utc().hour();return e.recurrence==t.IntervalEnum.Year?n.getMinutes()+" "+r+" "+e.dayOfMonth+" "+e.monthOfYear+" *":e.recurrence==t.IntervalEnum.Month?n.getMinutes()+" "+r+" "+e.dayOfMonth+" * *":e.recurrence==t.IntervalEnum.Week?n.getMinutes()+" "+r+" * * "+e.dayOfWeek:e.recurrence==t.IntervalEnum.Day?n.getMinutes()+" "+r+" * * *":e.recurrence==t.IntervalEnum.Custom?e.customExpr:""},e.ɵfac=function(t){return new(t||e)},e.ɵprov=n.ɵɵdefineInjectable({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),oe=function(){function e(){}return e.ɵmod=n.ɵɵdefineNgModule({type:e}),e.ɵinj=n.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,x.BsDropdownModule,O.TabsModule,b.PaginationModule,g.ModalModule,f.AccordionModule,C.PopoverModule,S.TooltipModule,h.CarouselModule,s.AlertModule,p.BsDatepickerModule,y.ButtonsModule,v.CollapseModule,E.ProgressbarModule,d.TimepickerModule,u.FtAutofocusModule,c.NgxI18nModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(oe,{declarations:[ne],imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,x.BsDropdownModule,O.TabsModule,b.PaginationModule,g.ModalModule,f.AccordionModule,C.PopoverModule,S.TooltipModule,h.CarouselModule,s.AlertModule,p.BsDatepickerModule,y.ButtonsModule,v.CollapseModule,E.ProgressbarModule,d.TimepickerModule,u.FtAutofocusModule,c.NgxI18nModule],exports:[ne]}),e.CronJobService=re,e.PolpBsCronJobModule=oe,e.ScheduleTimePickerComponent=ne,e.defaultDict=k,e.getDefaultScheduleTime=T,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polpware-cron-job.umd.min.js.map